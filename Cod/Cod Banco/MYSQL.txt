create database empresaDeEventos;
use empresaDeEventos;


CREATE TABLE localdeevento(
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome varchar(50),
    logradouro VARCHAR(80),
    cep VARCHAR(8),
    numero VARCHAR(12),
    capacidade INT,
    fileiras int,
    colunas int
);


CREATE TABLE evento(
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome varchar(40) NOT NULL,
    idadeMin INT NOT NULL,
    duracao varchar(20) NOT NULL,
    dataInicio varchar(10) NOT NULL,
    dataFim varchar(10) NOT NULL,
    horaInicio varchar(10) NOT NULL,
    horaFim varchar(10) NOT NULL,
    valorIngresso DECIMAL(10,2) NOT NULL,
    id_localdeevento INT NOT NULL,
    FOREIGN KEY (id_localdeevento) REFERENCES empresaDeEventos.localdeevento(id)
);


CREATE TABLE assento(
    id INT AUTO_INCREMENT PRIMARY KEY,
    numero INT NOT NULL,
    coluna int not null,
    fileira int not null,
    especial BIT NOT NULL,
    id_localdeevento INT NOT NULL,
    FOREIGN KEY (id_localdeevento) REFERENCES empresaDeEventos.localdeevento(id)
);

CREATE TABLE ingresso(
    id INT AUTO_INCREMENT PRIMARY KEY,
    comprado BIT NOT NULL,
    id_evento INT NOT NULL,
    id_assento INT,
    FOREIGN KEY (id_evento) REFERENCES empresaDeEventos.evento(id),
    FOREIGN KEY (id_assento) REFERENCES empresaDeEventos.assento(id)
);


CREATE TABLE usuario(
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(60) NOT NULL,
    email VARCHAR(70) UNIQUE NOT NULL,
    senha VARCHAR(20) NOT NULL
);


CREATE TABLE cliente(
    id INT AUTO_INCREMENT PRIMARY KEY,
    dataNascimento varchar(10) NOT NULL,
    id_usuario INT NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES empresaDeEventos.usuario(id)
);

-- Tabela: Organizador
CREATE TABLE organizador(
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_usuario INT NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES empresaDeEventos.usuario(id)
);

-- Tabela: Ingresso_Cliente
CREATE TABLE ingresso_cliente(
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT NOT NULL,
    id_ingresso INT NOT NULL,
    FOREIGN KEY (id_cliente) REFERENCES empresaDeEventos.cliente(id),
    FOREIGN KEY (id_ingresso) REFERENCES empresaDeEventos.ingresso(id)
);

-- Tabela: Venda
CREATE TABLE venda(
    id INT AUTO_INCREMENT PRIMARY KEY,
    valor DECIMAL(10,2) NOT NULL,
    dataCompra varchar(10) NOT NULL,
    dataPagamento varchar(10),
    id_evento INT NOT NULL,
    id_cliente INT NOT NULL,
    id_ingresso INT NOT NULL,
    FOREIGN KEY (id_evento) REFERENCES empresaDeEventos.evento(id),
    FOREIGN KEY (id_cliente) REFERENCES empresaDeEventos.cliente(id),
    FOREIGN KEY (id_ingresso) REFERENCES empresaDeEventos.ingresso(id)
);